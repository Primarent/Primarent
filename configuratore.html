<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Configuratore - Primarent</title>

<link rel="stylesheet" href="style.css" />

<style>
/* --- STILI LOCALI --- */
.container-config {
  max-width: 1000px;
  margin: 40px auto;
  padding: 20px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 6px 30px rgba(0,0,0,0.08);
  color: #1C1C1C;
}
.steps { display: flex; gap: 12px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
.step-pill { padding: 8px 14px; border-radius: 20px; background: #f0f0f0; font-weight: 600; }
.step-pill.active { background: var(--accent); color: white; }

.cars-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; margin-top: 16px; }
.car-card { border-radius: 10px; overflow: hidden; background: #fafafa; box-shadow: 0 3px 12px rgba(0,0,0,0.06); display: flex; flex-direction: column; }
.car-card img { width: 100%; height: 160px; object-fit: cover; }
.car-card .card-body { padding: 14px; flex: 1; display: flex; flex-direction: column; gap: 8px; }
.car-card h3 { margin: 0; font-size: 18px; }
.car-card p { margin: 0; color: #555; font-size: 14px; }

.big-price { font-size: 28px; font-weight: 900; color: var(--accent); }
.option { background: #fff; padding: 12px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.04); }

.summary {
  margin-top: 18px;
  padding: 14px;
  border-radius: 10px;
  background: #f7f7f7;
  font-size: 18px;
  display: flex;
  gap: 14px;
  align-items: center;
  justify-content: space-between;
}

@media (max-width: 700px){
  .container-config { margin: 20px; padding: 12px; }
  .car-card img { height: 140px; }
  .summary { flex-direction: column; align-items: flex-start; gap: 8px; }
}
</style>
</head>

<body>

<header class="navbar">
  <img src="logo.png" alt="Primarent Logo" class="nav-logo">
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="promo.html">Offerte</a></li>
      <li><a href="chi-siamo.html">Chi Siamo</a></li>
      <li><a href="contatti.html">Contatti</a></li>
      <li><a href="configuratore.html" class="cta">Configura</a></li>
    </ul>
  </nav>
</header>

<main class="container-config">

<!-- STEP INDICATOR -->
<div style="text-align:center; margin-bottom:8px;">
  <h1 style="margin:0 0 6px 0;">Configuratore Offerta</h1>
  <p style="margin:0;color:#666;">Scegli il modello e personalizza — il prezzo si aggiorna in tempo reale.</p>
</div>

<div class="steps">
  <div class="step-pill active" id="pill-1">1. Seleziona Auto</div>
  <div class="step-pill" id="pill-2">2. Personalizza</div>
  <div class="step-pill" id="pill-3">3. Riepilogo</div>
  <div class="step-pill" id="pill-4">4. Richiesta</div>
</div>

<!-- STEP 1 -->
<div id="step1">
  <div class="cars-grid" id="carsGrid"></div>
</div>

<!-- STEP 2 -->
<div id="step2" style="display:none;">
  <h2>Personalizza il tuo contratto</h2>

  <div class="options-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;">
    
    <div class="option">
      <strong>Durata (mesi)</strong><br>
      <select id="durata">
        <option value="24">24</option>
        <option value="36">36</option>
        <option value="48" selected>48</option>
        <option value="60">60</option>
      </select>
    </div>

    <div class="option">
      <strong>Km annui</strong><br>
      <select id="km">
        <option value="10000" selected>10.000 km</option>
        <option value="15000">15.000 km</option>
        <option value="20000">20.000 km</option>
        <option value="25000">25.000 km</option>
      </select>
    </div>

    <div class="option">
      <strong>Servizi aggiuntivi</strong><br>
      <label><input type="checkbox" class="srv" value="10"> Furto Azzerato 0€ </label><br>
      <label><input type="checkbox" class="srv" value="20"> Assicurazione Kasko TOTALE 0€ </label><br>
      
    </div>

    <div class="option">
      <strong>Accessori</strong><br>
      <label><input type="checkbox" class="srv" value="15"> Pneumatici (+15€)</label><br>
      <label><input type="checkbox" class="srv" value="8"> Vettura sostitutiva (+8€)</label>
      
    </div>
  </div>

  <div class="summary">
    <div class="left">
      <div id="selCarName" style="font-weight:700;">Seleziona un'auto</div>
      <div id="selCarMeta" style="color:#666;font-size:14px;">Per vedere il prezzo</div>
    </div>
    <div class="right">
      <div class="big-price" id="partialPrice">€0 /mese</div>
    </div>
  </div>

  <div style="text-align:right;margin-top:14px;">
    <button class="btn" onclick="backToStep1()">← Modifica auto</button>
    <button class="btn" onclick="toStep3()" style="background:var(--accent);">Continua →</button>
  </div>
</div>

<!-- STEP 3 -->
<div id="step3" style="display:none;">
  <h2>Riepilogo offerta</h2>

  <div style="display:flex;gap:16px;flex-wrap:wrap;align-items:center;">
    <img id="recapImg" src="" style="width:220px;height:140px;object-fit:cover;border-radius:8px;">
    
    <div style="flex:1;">
      <h3 id="recapName"></h3>
      <p id="recapMeta" style="color:#666;"></p>
      <div id="recapServices"></div>
    </div>

    <div>
      <div style="font-size:14px;color:#666;">Canone stimato</div>
      <div class="big-price" id="recapPrice">€0 /mese</div>
    </div>
  </div>

  <div style="text-align:right;margin-top:18px;">
    <button class="btn" onclick="backToStep2()">← Indietro</button>
    <button class="btn" onclick="toStep4()" style="background:var(--accent);">Richiedi Preventivo →</button>
  </div>
</div>

<!-- STEP 4 -->
<div id="step4" style="display:none;">
  <h2>Richiedi il preventivo</h2>

  <div style="max-width:700px;margin:auto;">
    <label>Nome</label><br>
    <input id="userName" style="width:100%;padding:10px;margin-bottom:8px;">

    <label>Telefono</label><br>
    <input id="userPhone" style="width:100%;padding:10px;margin-bottom:8px;">

    <label>Email</label><br>
    <input id="userEmail" style="width:100%;padding:10px;margin-bottom:8px;">

    <label>Note (opzionale)</label><br>
    <textarea id="userNote" style="width:100%;padding:10px;margin-bottom:8px;"></textarea>

    <div style="text-align:right;">
      <button class="btn" onclick="backToStep3()">← Indietro</button>
      <button class="btn" id="sendWhatsapp" style="background:#25D366;">Invia su WhatsApp</button>
    </div>
  </div>
</div>

</main>
<footer style="text-align:center;padding:18px;color:#666;">
© 2025 Primarent.it — Tutti i diritti riservati
</footer>

<script>
/* ============================================================
   DATI AUTO
============================================================ */
const cars = [
  {id:1, name:"Fiat Grande Panda", base:290, img:"https://cdn.motor1.com/images/mgl/vxZmRA/s3/fiat-grande-panda-2024.jpg", desc:"Iconica e pratica."},
  {id:2, name:"Fiat 500 Hybrid Torino", base:329, img:"https://www.fiat.it/content/dam/fiat2023/cross/models/new-500-hybrid/model/500-hybrid-range/mobile.jpg", desc:"Compatta, urbana e conveniente."},
  {id:17, name:"Ford Puma 125Cv Hybrid ST-Line", base:369, img:"https://cdn-xy.drivek.com/eyJidWNrZXQiOiJkYXRhay1jZG4teHkiLCJrZXkiOiJjb25maWd1cmF0b3ItaW1ncy9jYXJzL2l0L29yaWdpbmFsL0ZPUkQvUFVNQS80NDQ0N19TVVYtNS1QT1JURS9mb3JkLXB1bWEtZnJvbnQtdmlldy5qcGciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjEwMjQsImhlaWdodCI6bnVsbCwiZml0IjoiY292ZXIifX19", desc:"Crossover perfetta, linee sportive guida comoda."},
  {id:18, name:"Peugeot 3008 145 Allure Hybrid Auto", base:449, img:"https://cms-assets.autoscout24.com/uaddx06iwzdz/273w4q3yh3at4uL5bcQjcn/829008eb177d4fdeff2b89e4924585ef/Peugeot-e-3008-2024-1600-05.jpg?w=1100", desc:"SUV elegante, tecnologie all'avanguardia."},
    {id:3, name:"AlfaRomeo Tonale", base:469, img:"https://cdnwp.dealerk.com/eed49ed7/uploads/sites/979/2019/03/190305_alfa-romeo_tonale-concept_01.jpg", desc:"SUV compatto, comodo per ogni viaggio."},
    {id:4, name:"Ford Kuga ST Line", base:365, img:"https://www.ford.it/content/dam/guxeu/rhd/central/cars/2023-kuga/dse/column-cards/ford-cx482-eu-Column_Card_STL_02_CX482-3x2-1000x667-blue-kuga-driving-in-city.jpg", desc:"Affidabile e spaziosa."},
    {id:5, name:"Peugeot 208", base:328, img:"https://acnews.blob.core.windows.net/imgnews/medium/NAZ_7e2fc209034d40378b5e97357f96e169.webp", desc:"Elegante e moderna."},
    {id:6, name:"Renault Clio", base:293, img:"https://media.renault.it/wp-content/uploads/2024/05/2b78859a7e634b0ae831509ec35ac969-l.jpg.webp", desc:"Piccola ma pratica."},
    {id:7, name:"Opel Corsa", base:299, img:"https://cdn.brandini.it/cover-prod/upload-67a48916c667d6.95832319.jpg", desc:"Perfetta in città."},
    {id:8, name:"Ford Focus ST Line", base:498, img:"https://cdn.motor1.com/images/mgl/EK0zR/s1/2022-ford-focus-st-line.jpg", desc:"Guida confortevole e precisa."},
    {id:9, name:"Hyundai i30 !Stock Terminato!", base:449, img:"https://media.whichcar.com.au/uploads/2024/07/ebe8f7f5-2025-hyundai-i30-n-05-resized.jpg", desc:"Design moderno e dotazioni."},
    {id:10, name:"Kia Sportage !Stock Terminato!", base:389, img:"https://di-uploads-pod12.dealerinspire.com/beavertonkiaredesign/uploads/2024/07/2025-Kia-Sportage.jpg", desc:"SUV pratico e sicuro."},
    
    {id:11, name:"Audi A3", base:559, img:"https://thedriver.it/listini/foto/audi-a3-sportback-44134_hatchback-5-doors-audi-a3-sportback-front-view.jpg", desc:"Stile e performance."},
    {id:12, name:"BMW Serie 1", base:559, img:"https://red-live.imgix.net/wp-content/uploads/2024/06/BMW-Serie-1-2025-7.jpeg?auto=format%2Ccompress&w=1024&h=1024", desc:"Guida sportiva e comfort."},
    {id:13, name:"Mercedes A-Class", base:529, img:"https://www.gruppocarraro.it/images/uploads/blocks/mercedes-classe-a-2023-prezzi.jpg", desc:"Lusso compatto."},
    {id:14, name:"Nissan Qashqai", base:439, img:"https://cdn-xy.drivek.com/eyJidWNrZXQiOiJkYXRhay1jZG4teHkiLCJrZXkiOiJjb25maWd1cmF0b3ItaW1ncy9jYXJzL2l0L29yaWdpbmFsL05JU1NBTi9RQVNIUUFJLzQ0NzQ2X0NST1NTT1ZFUi01LURPT1JTL25pc3Nhbi1xYXNocWFpLWZyb250LXZpZXcuanBnIiwiZWRpdHMiOnsicmVzaXplIjp7IndpZHRoIjoxMDI0LCJoZWlnaHQiOm51bGwsImZpdCI6ImNvdmVyIn19fQ==", desc:"SUV versatile e confortevole."},
    
    /*{id:16, name:"Skoda Octavia", base:289, img:"https://images.unsplash.com/photo-1511919884226-1e1d2f6c7d3a?w=1200", desc:"Spazio e affidabilità."},
    {id:17, name:"Mazda 3", base:279, img:"https://images.unsplash.com/photo-1483729558449-99ef09a8c326?w=1200", desc:"Design elegante e guida dinamica."},
    {id:18, name:"Honda Civic", base:309, img:"https://images.unsplash.com/photo-1493238792000-8113da705764?w=1200", desc:"Qualità e durabilità."},
    {id:19, name:"Volvo XC40", base:449, img:"https://images.unsplash.com/photo-1542362567-5b2f3a5f1b2c?w=1200", desc:"Sicurezza scandinava."},
    {id:20, name:"Porsche Macan", base:799, img:"https://images.unsplash.com/photo-1523987355523-abc5b6d6d6f2?w=1200", desc:"Performance e prestigio."} */
  ]; 

let state = { carId:null, durata:48, km:10000, servizi:[], accessori:[] };

function fmt(v){ return "€"+Number(v).toLocaleString("it-IT"); }

/* ============================================================
   GENERA AUTO
============================================================ */
function renderCars(){
  const grid = document.getElementById("carsGrid");
  grid.innerHTML = "";
  cars.forEach(car=>{
    const div = document.createElement("div");
    div.className="car-card";
    div.innerHTML = `
      <img src="${car.img}">
      <div class="card-body">
        <h3>${car.name}</h3>
        <p>${car.desc}</p>
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:800;color:var(--accent);">${fmt(car.base)}/mese</div>
          <button class="btn" onclick="selectCar(${car.id})">Seleziona</button>
        </div>
      </div>`;
    grid.appendChild(div);
  });
}

/* ============================================================
   LOGICA CONFIGURATORE
============================================================ */
function selectCar(id){
  state.carId = id;
  const car = cars.find(c=>c.id===id);
  document.getElementById("selCarName").innerText = car.name;
  document.getElementById("selCarMeta").innerText = car.desc;
  updatePartialPrice();
  showStep(2);
}

function calculatePrice(){
  if(!state.carId) return 0;

  const car = cars.find(c=>c.id===state.carId);
  let price = car.base;

  const kmMul = {10000:1.0,15000:1.1,20000:1.2,25000:1.27};
  const durMul = {24:1.30,36:1.1,48:1.0,60:0.96};

  price = price * (kmMul[state.km]||1) * (durMul[state.durata]||1);

  price += state.servizi.reduce((a,b)=>a+b,0);
  price += state.accessori.reduce((a,b)=>a+b,0);

  return Math.round(price);
}

/* ======== AGGIORNAMENTO AUTOMATICO PREZZO ======== */
function updatePartialPrice(){
  state.durata = Number(document.getElementById("durata").value);
  state.km = Number(document.getElementById("km").value);
  state.servizi = Array.from(document.querySelectorAll(".srv:checked")).map(e=>Number(e.value));
  state.accessori = Array.from(document.querySelectorAll(".access:checked")).map(e=>Number(e.value));
  document.getElementById("partialPrice").innerText = fmt(calculatePrice())+" /mese";
}

/* EVENT LISTENER AUTOMATICI */
document.addEventListener("change", e=>{
  if(e.target.id==="durata" || e.target.id==="km" || e.target.classList.contains("srv") || e.target.classList.contains("access")){
    updatePartialPrice();
  }
});

/* ============================================================
   NAVIGAZIONE DEGLI STEP
============================================================ */
function showStep(n){
  for(let i=1;i<=4;i++){
    document.getElementById("step"+i).style.display = (i===n?"block":"none");
    document.getElementById("pill-"+i).classList.toggle("active",i===n);
  }
}

function toStep3(){
  renderRecap();
  showStep(3);
}
function backToStep2(){ showStep(2); }
function backToStep1(){ showStep(1); }

function toStep4(){ showStep(4); }

/* ============================================================
   RIEPILOGO
============================================================ */
function renderRecap(){
  const car = cars.find(c=>c.id===state.carId);
  document.getElementById("recapImg").src = car.img;
  document.getElementById("recapName").innerText = car.name;
  document.getElementById("recapMeta").innerText =
    `${car.desc} • Durata: ${state.durata} mesi • Km annui: ${state.km}`;
  document.getElementById("recapPrice").innerText =
    fmt(calculatePrice())+" /mese";

  const srv = Array.from(document.querySelectorAll(".srv:checked"))
    .map(n=>n.parentNode.textContent.trim())
    .join(" • ");
  const acc = Array.from(document.querySelectorAll(".access:checked"))
    .map(n=>n.parentNode.textContent.trim())
    .join(" • ");

  let out="";
  if(srv) out += "<strong>Servizi:</strong> "+srv+"<br>";
  if(acc) out += "<strong>Accessori:</strong> "+acc;

  document.getElementById("recapServices").innerHTML = out;
}

/* ============================================================
   WHATSAPP
============================================================ */
document.getElementById("sendWhatsapp").addEventListener("click",function(){
  const car = cars.find(c=>c.id===state.carId);

  const msg = encodeURIComponent(
    "Richiesta Preventivo Primarent\n"+
    "Auto: "+car.name+"\n"+
    "Canone stimato: "+fmt(calculatePrice())+"/mese\n"+
    "Durata: "+state.durata+" mesi\n"+
    "Km annui: "+state.km+"\n"+
    "Cliente: "+document.getElementById("userName").value+"\n"+
    "Telefono: "+document.getElementById("userPhone").value+"\n"+
    "Email: "+document.getElementById("userEmail").value+"\n"+
    "Note: "+document.getElementById("userNote").value
  );

  window.open("https://wa.me/393472486486?text="+msg,"_blank");
});

/* AVVIO */
renderCars();
showStep(1);

</script>
</body>
</html>
